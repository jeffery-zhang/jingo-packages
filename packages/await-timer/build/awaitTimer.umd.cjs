(function(i,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(i=typeof globalThis<"u"?globalThis:i||self,t(i.awaitTimer={}))})(this,function(i){"use strict";var p=Object.defineProperty;var a=(i,t,e)=>t in i?p(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var s=(i,t,e)=>a(i,typeof t!="symbol"?t+"":t,e);class t{constructor(o,n,r){s(this,"_timer",null);s(this,"_isStopped",!0);s(this,"_options",{immediate:!1,autoStart:!0});this._callback=o,this._delay=n,r&&(this._options={...this._options,...r}),this._options.autoStart&&this.start()}get isStopped(){return this._isStopped}async _runLoop(){if(!this._isStopped){if(this._timer&&clearTimeout(this._timer),this._options.immediate)try{await this._callback()}catch(o){throw console.error("An Error Occured in the loop: "),o}this._timer=setTimeout(()=>this._runLoop(),this._delay)}}start(){this._isStopped=!1,this._runLoop()}stop(){this._timer&&clearTimeout(this._timer),this._isStopped=!0}destroy(){this.stop(),this._timer=null}}i.AwaitTimer=t,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
